{"ast":null,"code":"import _objectSpread from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/src/components/Adjust/Adjust.js\";\nimport React, { Component } from \"react\";\nimport \"./Adjust.css\";\nimport Slider from \"../slider/slider\";\n\nvar Adjust =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Adjust, _Component);\n\n  function Adjust(props) {\n    var _this;\n\n    _classCallCheck(this, Adjust);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Adjust).call(this, props));\n\n    _this.slidderChangeHandler = function (event, element) {\n      // event.persist();\n      var temp = element;\n\n      var adjust = _toConsumableArray(_this.state.adjust);\n\n      adjust.map(function (el) {\n        if (el.name === element.name) {\n          el.range = event.target.value;\n        }\n      });\n      adjust = _toConsumableArray(_this.state.adjust);\n\n      _this.setState({\n        adjust: adjust,\n        changedElement: element\n      }, function () {\n        _this.applyFilter(temp);\n      });\n    };\n\n    _this.applyFilter = function (element) {\n      var adjust = _toConsumableArray(_this.state.adjust);\n\n      var x = _this.props.canvas.draw(_this.texture);\n\n      var ajustObj = [];\n      x.curves([[0, 0], [1, 1]]).update();\n      adjust.forEach(function (el) {\n        var objAdj = {};\n\n        if (el.name !== 'triangleBlur') {\n          x[el.functionName](parseFloat(el.range) / 100, 0).update();\n          objAdj.name = el.name;\n          objAdj.range = el.range;\n          ajustObj.push(objAdj);\n        } else {\n          x[el.functionName](parseFloat(el.range), 0).update();\n          objAdj.name = el.name;\n          objAdj.range = el.range;\n          ajustObj.push(objAdj);\n        }\n      });\n\n      var imgID = _this.props.selected.element[0].getAttribute('id');\n\n      if (document.getElementById(imgID) !== null && document.getElementById(imgID).tagName === 'IMG') {\n        _this.appendCanvas(_this.props.selected.element[0]).then(function (val) {\n          if (val === 'Appended') {\n            var currentItem = document.querySelector(\"#\" + _this.currentId);\n            currentItem.setAttribute(\"data-adjust\", JSON.stringify(_objectSpread({}, ajustObj)));\n          }\n        });\n      }\n\n      if (document.getElementById(imgID).tagName === 'CANVAS') {\n        var currentItem = document.querySelector(\"#\" + _this.currentId);\n        currentItem.setAttribute(\"data-adjust\", JSON.stringify(_objectSpread({}, ajustObj)));\n      }\n\n      if (_this.loopCanvasElement) {\n        _this.appendCanvas(_this.loopCanvasElement).then(function (val) {\n          if (val === 'Appended') {\n            var _currentItem = document.querySelector(\"#\" + _this.currentId);\n\n            _currentItem.setAttribute(\"data-adjust\", JSON.stringify(_objectSpread({}, ajustObj)));\n          }\n        });\n      }\n    };\n\n    _this.appendCanvas = function (element) {\n      return new Promise(function (resolve, reject) {\n        var getClass = element.getAttribute('class');\n        var getId = element.getAttribute('id');\n        document.getElementById(getId).parentElement.appendChild(_this.props.canvas);\n\n        _this.props.canvas.classList.add(getClass);\n\n        _this.props.canvas.setAttribute('id', getId);\n\n        element.remove();\n        resolve(\"Appended\");\n      });\n    };\n\n    _this.resetHandler = function () {\n      var adjust = _toConsumableArray(_this.state.adjust);\n\n      var shouldResetWork = adjust.every(function (el) {\n        return el.range === 0;\n      });\n      adjust = _toConsumableArray(_this.state.adjust);\n      adjust.forEach(function (el) {\n        if (el.range !== 0) {\n          el.range = 0;\n        }\n      });\n\n      if (_this.props.selected.element[0].tagName === 'CANVAS') {\n        _this.setState({\n          adjust: adjust\n        }, function () {\n          _this.applyFilter();\n        });\n      } else {\n        if (!shouldResetWork) {\n          _this.texture = _this.props.canvas.texture(_this.props.selected.element[0]);\n\n          var x = _this.props.canvas.draw(_this.texture);\n\n          _this.setState({\n            adjust: adjust\n          }, function () {\n            _this.applyFilter();\n          });\n        } else {\n          alert(\"There is nothing to reset\");\n        }\n      }\n    };\n\n    console.log(_this.props); // this.applyFilter = this.applyFilter.bind(window)\n\n    _this.state = {\n      adjust: [{\n        name: \"brightness\",\n        range: 0,\n        functionName: \"brightnessContrast\"\n      }, {\n        name: \"contrast\",\n        range: 0,\n        functionName: \"brightnessContrast\"\n      }, {\n        name: \"hue\",\n        range: 0,\n        functionName: \"hueSaturation\"\n      }, {\n        name: \"saturation\",\n        range: 0,\n        functionName: \"hueSaturation\"\n      }, {\n        name: \"vibrance\",\n        range: 0,\n        functionName: \"vibrance\"\n      }, {\n        name: \"noise\",\n        range: 0,\n        functionName: \"noise\"\n      }, {\n        name: \"sepia\",\n        range: 0,\n        functionName: \"sepia\"\n      }, {\n        name: \"triangleBlur\",\n        range: 0,\n        functionName: \"triangleBlur\"\n      }, {\n        name: \"ink\",\n        range: 0,\n        functionName: \"ink\"\n      }],\n      changedElement: null\n    };\n    _this.loopCanvasElement = null;\n    _this.currentId = _this.props.selected.element[0].id;\n\n    if (_this.props.selected.element[0].tagName === 'IMG') {\n      _this.texture = _this.props.canvas.texture(_this.props.selected.element[0]);\n    }\n\n    if (_this.props.selected.element[0].tagName === 'CANVAS') {\n      _this.props.selected.allImageElement.forEach(function (el) {\n        console.log(el.getAttribute('id'), _this.props.selected.allImageElement, el.getAttribute('id'), _this.props.selected.element[0].getAttribute('id'), _this.props.selected.element[0].getAttribute('id').indexOf(el.getAttribute('id')));\n\n        if (el.getAttribute('id') === _this.props.selected.element[0].getAttribute('id') || _this.props.selected.element[0].getAttribute('id').indexOf(el.getAttribute('id')) > -1) {\n          _this.loopCanvasElement = el;\n          _this.texture = _this.props.canvas.texture(el);\n        }\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(Adjust, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.selected.element[0].getAttribute('data-adjust')) {\n        var data_adjust = JSON.parse(this.props.selected.element[0].getAttribute('data-adjust'));\n\n        var adjust = _toConsumableArray(this.state.adjust);\n\n        var newArray = [];\n        adjust.map(function (el) {\n          for (var i in data_adjust) {\n            if (data_adjust[i].name === el.name) {\n              data_adjust[i].functionName = el.functionName;\n              newArray.push(data_adjust[i]);\n            }\n          }\n        });\n        this.setState({\n          adjust: newArray\n        }, function () {\n          _this2.props.selected.element[0].parentElement.appendChild(_this2.loopCanvasElement);\n\n          _this2.props.selected.element[0].remove();\n\n          _this2.applyFilter();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var slider = this.state.adjust.map(function (element, i) {\n        if (element.name === 'brightness' || element.name === 'contrast' || element.name === 'saturation' || element.name === 'hue' || element.name === 'vibrance' || element.name === 'exposure') {\n          return React.createElement(Slider, {\n            SliderRange: element,\n            draggged: function draggged(event, element) {\n              return _this3.slidderChangeHandler(event, element);\n            },\n            min: \"-100\",\n            max: \"100\",\n            step: \"1\",\n            slidertype: element.name,\n            key: element.name + i,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 212\n            },\n            __self: this\n          });\n        } else {\n          return React.createElement(Slider, {\n            SliderRange: element,\n            draggged: function draggged(event, element) {\n              return _this3.slidderChangeHandler(event, element);\n            },\n            min: \"0\",\n            max: \"100\",\n            step: \"1\",\n            slidertype: element.name,\n            key: element.name + i,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 224\n            },\n            __self: this\n          });\n        }\n      });\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"adjust-main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, slider), React.createElement(\"button\", {\n        onClick: this.resetHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"Reset\"));\n    }\n  }]);\n\n  return Adjust;\n}(Component);\n\nexport default Adjust;\n/* \nUnsharp Mask [demo]\ncanvas.unsharpMask(radius, strength);\n\nVignette [demo]\ncanvas.vignette(size, amount);\n\nLens Blur [demo]\ncanvas.lensBlur(radius, brightness, angle);\n\nZoom Blur [demo]\ncanvas.zoomBlur(centerX, centerY, strength);\n\nHexagonal Pixelate [demo]\ncanvas.hexagonalPixelate(centerX, centerY, scale);\n\nInk [demo]\ncanvas.ink(strength); */","map":{"version":3,"sources":["/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/src/components/Adjust/Adjust.js"],"names":["React","Component","Slider","Adjust","props","slidderChangeHandler","event","element","temp","adjust","state","map","el","name","range","target","value","setState","changedElement","applyFilter","x","canvas","draw","texture","ajustObj","curves","update","forEach","objAdj","functionName","parseFloat","push","imgID","selected","getAttribute","document","getElementById","tagName","appendCanvas","then","val","currentItem","querySelector","currentId","setAttribute","JSON","stringify","loopCanvasElement","Promise","resolve","reject","getClass","getId","parentElement","appendChild","classList","add","remove","resetHandler","shouldResetWork","every","alert","console","log","id","allImageElement","indexOf","data_adjust","parse","newArray","i","slider"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Adjust.css\";\nimport Slider from \"../slider/slider\";\n\n\n\n\nclass Adjust extends Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props);\n    // this.applyFilter = this.applyFilter.bind(window)\n    \n    this.state = {\n      adjust: [\n        {\n          name: \"brightness\",\n          range: 0,\n          functionName: \"brightnessContrast\"\n        },\n        {\n          name: \"contrast\",\n          range: 0,\n          functionName: \"brightnessContrast\"\n        },\n        {\n          name: \"hue\",\n          range: 0,\n          functionName: \"hueSaturation\"\n        },\n        {\n          name: \"saturation\",\n          range: 0,\n          functionName: \"hueSaturation\"\n        },\n        {\n          name: \"vibrance\",\n          range: 0,\n          functionName: \"vibrance\"\n        },\n        {\n          name: \"noise\",\n          range: 0,\n          functionName: \"noise\"\n        },\n        {\n          name: \"sepia\",\n          range: 0,\n          functionName: \"sepia\"\n        },\n        {\n          name: \"triangleBlur\",\n          range: 0,\n          functionName: \"triangleBlur\"\n        },\n        {\n          name: \"ink\",\n          range: 0,\n          functionName: \"ink\"\n        }\n      ],\n      changedElement: null,\n    };\n    this.loopCanvasElement =  null;\n    this.currentId = this.props.selected.element[0].id;\n     if (this.props.selected.element[0].tagName === 'IMG') {\n      this.texture = this.props.canvas.texture(this.props.selected.element[0]);\n    } \n    if (this.props.selected.element[0].tagName === 'CANVAS') {      \n      this.props.selected.allImageElement.forEach(el => {\n        console.log(el.getAttribute('id') , this.props.selected.allImageElement,el.getAttribute('id'), this.props.selected.element[0].getAttribute('id'), this.props.selected.element[0].getAttribute('id').indexOf(el.getAttribute('id')));\n        if(el.getAttribute('id') === this.props.selected.element[0].getAttribute('id') || this.props.selected.element[0].getAttribute('id').indexOf(el.getAttribute('id')) > -1){\n          this.loopCanvasElement = el;\n          this.texture = this.props.canvas.texture(el);\n        }\n      })\n    }\n  }\n\ncomponentDidMount() {\n if(this.props.selected.element[0].getAttribute('data-adjust')){\n   let data_adjust = JSON.parse(this.props.selected.element[0].getAttribute('data-adjust'));\n   let adjust = [...this.state.adjust]\n let newArray  =  [];\n adjust.map(el => {\n    for(let i in data_adjust){\n     if(data_adjust[i].name === el.name){\n      data_adjust[i].functionName = el.functionName\n      newArray.push(data_adjust[i])\n     }\n    }\n})\nthis.setState({\n  adjust: newArray\n}, () => { \n  this.props.selected.element[0].parentElement.appendChild(this.loopCanvasElement);\n  this.props.selected.element[0].remove();\n  this.applyFilter()\n})\n }\n\n}\n\n\n  slidderChangeHandler = (event, element) => {\n    // event.persist();\n    let temp = element;\n    let adjust = [...this.state.adjust];\n    adjust.map(el => {\n      if (el.name === element.name) {\n        el.range = event.target.value;\n      }\n    });\n    adjust =  [...this.state.adjust]\n    this.setState({ adjust: adjust, changedElement: element }, () => {\n     this.applyFilter(temp);\n     \n    });\n};\n\n/* Applying filter on image */\napplyFilter = (element) => {\n\n\n  let adjust = [...this.state.adjust];\n  let x = this.props.canvas.draw(this.texture);\n  let ajustObj = [];\n  x.curves( [[0,0],[1,1]]).update();\n  adjust.forEach((el) => {\n    let objAdj = {};\n    if(el.name !== 'triangleBlur'){\n      x[el.functionName](parseFloat(el.range)/100, 0).update();  \n      objAdj.name = el.name;\n      objAdj.range = el.range;\n      ajustObj.push(objAdj)  \n     }\n     else{\n      x[el.functionName](parseFloat(el.range), 0).update();\n      objAdj.name = el.name;\n      objAdj.range = el.range;\n      ajustObj.push(objAdj);\n     }  \n  });\n  let imgID = this.props.selected.element[0].getAttribute('id');\n \nif(document.getElementById(imgID) !== null && document.getElementById(imgID).tagName === 'IMG'){\n   this.appendCanvas(this.props.selected.element[0]).then(val => {\n    if(val === 'Appended'){\n      let currentItem=document.querySelector(\"#\"+this.currentId)\n      currentItem.setAttribute(\"data-adjust\",JSON.stringify({...ajustObj}))\n    }\n  })\n}\nif(document.getElementById(imgID).tagName === 'CANVAS'){\n      let currentItem=document.querySelector(\"#\"+this.currentId)      \n      currentItem.setAttribute(\"data-adjust\",JSON.stringify({...ajustObj}))\n}\nif(this.loopCanvasElement){\n  this.appendCanvas(this.loopCanvasElement).then(val => {\n   if(val === 'Appended'){\n     let currentItem=document.querySelector(\"#\"+this.currentId)\n     currentItem.setAttribute(\"data-adjust\",JSON.stringify({...ajustObj}))\n   }\n })\n}\n}\n\nappendCanvas = (element)=>{  \n  return new Promise((resolve, reject) => {\n    let getClass = element.getAttribute('class');\n    let getId =  element.getAttribute('id');\n    document.getElementById(getId).parentElement.appendChild(this.props.canvas);\n    this.props.canvas.classList.add(getClass);\n    this.props.canvas.setAttribute('id',getId)\n    element.remove(); \n    resolve(\"Appended\")\n  }) \n}\n\nresetHandler = () => {\n  let adjust = [...this.state.adjust]\n  const shouldResetWork = adjust.every(el => el.range === 0  )\n   adjust = [...this.state.adjust];\n    adjust.forEach(el => {\n      if(el.range !== 0){\n        el.range = 0\n      }\n    })\nif(this.props.selected.element[0].tagName === 'CANVAS'){\n  this.setState({ adjust: adjust }, () => {\n    this.applyFilter();\n  });\n}\nelse{\n  if(!shouldResetWork){\n    this.texture = this.props.canvas.texture(this.props.selected.element[0]);\n    let x = this.props.canvas.draw(this.texture);\n    this.setState({ adjust: adjust }, () => {\n      this.applyFilter();\n    });\n  }else{\n    alert(\"There is nothing to reset\")\n  }\n}\n} \n\n  render() {\n    let slider = this.state.adjust.map((element, i) => {\n      if(element.name === 'brightness' ||  element.name === 'contrast' || element.name === 'saturation' ||  element.name === 'hue' ||  \n      element.name === 'vibrance' ||  element.name === 'exposure' ){\n        return (\n          <Slider\n            SliderRange={element}\n            draggged={(event, element) =>\n              this.slidderChangeHandler(event, element)\n            }\n            min=\"-100\" max=\"100\" step='1' slidertype={element.name}\n            key={element.name + i}\n         \n          />\n        );\n      }else{\n        return (\n          <Slider\n            SliderRange={element}\n            draggged={(event, element) =>\n              this.slidderChangeHandler(event, element)\n            }\n            min=\"0\" max=\"100\" step='1' slidertype={element.name}\n            key={element.name + i}\n          />\n        );\n      }\n    \n    });\n    return (\n      <React.Fragment>\n    <div className=\"adjust-main-container\">{slider}</div>\n    <button onClick={this.resetHandler}>Reset</button>\n    </React.Fragment>\n    )\n  }\n}\n\n\nexport default Adjust;\n\n\n\n/* \nUnsharp Mask [demo]\ncanvas.unsharpMask(radius, strength);\n\nVignette [demo]\ncanvas.vignette(size, amount);\n\nLens Blur [demo]\ncanvas.lensBlur(radius, brightness, angle);\n\nZoom Blur [demo]\ncanvas.zoomBlur(centerX, centerY, strength);\n\nHexagonal Pixelate [demo]\ncanvas.hexagonalPixelate(centerX, centerY, scale);\n\nInk [demo]\ncanvas.ink(strength); */"]},"metadata":{},"sourceType":"module"}