{"ast":null,"code":"import _objectSpread from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport $ from \"jquery\";\nimport \"jquery-ui/ui/widgets/draggable\";\nimport DragSelect from \"dragselect\";\nimport Button from \"./components/Button/Button\";\nimport Slider from \"./components/slider/slider\";\nimport Dropdown from \"./components/Dropdown/dropdown\";\nimport Adjust from \"./components/Adjust/Adjust\";\nimport { debug } from \"util\";\nimport fx from 'glfx';\n/* import SelectedElement from './components/SelectedElement/SelectedElement'; */\n// import Caman from 'caman'\n// --> OFF'\n\n/* eslint no-undef: 0 */\n// eslint-disable-next-line\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      btn: [{\n        value: \"Add Element\",\n        id: \"\"\n      }, {\n        value: \"Group\",\n        id: \"group\"\n      }, {\n        value: \"UngroupAll\",\n        id: \"ungroup\"\n      }, {\n        value: \"Ungroup\",\n        id: \"ungroupIndivi\"\n      }, {\n        value: \"Delete\",\n        id: \"delete\"\n      }, {\n        value: \"Copy\",\n        id: \"copy\"\n      }, {\n        value: \"Adjust\",\n        id: \"adjust\" // { value: \"Undo\", id: \"undo\" },\n        // { value: \"Redo\", id: \"redo\" }\n\n      }],\n      dropdown: [{\n        value: \"Postion\",\n        id: \"\"\n      }, {\n        value: \"Forwards\",\n        id: \"fwd\"\n      }, {\n        value: \"To Front\",\n        id: \"front\"\n      }, {\n        value: \"Backwards\",\n        id: \"bkwd\"\n      }, {\n        value: \"To Back\",\n        id: \"Back\"\n      }, {\n        value: \"Top\",\n        id: \"top\"\n      }, {\n        value: \"Middle\",\n        id: \"middle\"\n      }, {\n        value: \"Bottom\",\n        id: \"bottom\"\n      }, {\n        value: \"Left\",\n        id: \"left\"\n      }, {\n        value: \"Centre\",\n        id: \"centre\"\n      }, {\n        value: \"Right\",\n        id: \"right\"\n      }],\n      slidder: {\n        range: 0,\n        selected: []\n      },\n      flip: [{\n        value: \"Flip\",\n        id: \"\"\n      }, {\n        value: \"Horizontal\",\n        id: \"hori\"\n      }, {\n        value: \"Vertical\",\n        id: \"veri\"\n      }],\n      adjust: false,\n      image: {\n        src: null,\n        element: null,\n        canvaselement: null,\n        dataUrl: null,\n        allImageElement: []\n      },\n      platform: null\n    };\n    _this.base_URL = \"http://localhost:3000/\";\n\n    _this.keyEventCheck = function (event, map) {\n      /*    console.log(event,map, this.state.platform); */\n      if (_this.deleteElm && map[46]) {\n        _this.deleteElme(event);\n      }\n\n      if (map[17] && map[18] && map[221] && _this.positionElement) {\n        _this.dropdownClickHandler(event, \"To Front\");\n      }\n\n      if (map[17] && map[18] && map[219] && _this.positionElement) {\n        _this.dropdownClickHandler(event, \"To Back\");\n      }\n\n      if (map[17] && map[221] && _this.positionElement) {\n        _this.dropdownClickHandler(event, \"Forwards\");\n      }\n\n      if (map[17] && map[219] && _this.positionElement) {\n        _this.dropdownClickHandler(event, \"Backwards\");\n      }\n\n      if (map[17] && map[67]) {\n        _this.duplicateElement();\n      }\n\n      map = {};\n    };\n\n    _this.addElement = function () {\n      if ($(\".main-container\").children().length) {\n        var x = $(\".text:last\");\n        var top = parseFloat(x.css(\"top\").slice(0, -2)); // x = x.attr(\"id\").slice(-1);\n\n        $(\".main-container\").append(\"<div class='text ele-select'>\" + Math.random().toFixed(2) + \"</div>\"); // $(\".text:last\").attr(\"id\", \"text\" + ++x);\n\n        _this.uuidv4().then(function (val) {\n          $(\".text:last\").attr(\"id\", \"text\" + val);\n          $(\".text:last\").css({\n            top: top + 27\n          });\n          $(\".text:last\").draggable({\n            cursor: \"move\"\n          });\n\n          _this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n        });\n      } else {\n        $(\".main-container\").append(\"<div class='text ele-select'>\" + Math.random().toFixed(2) + \"</div>\");\n        $(\".text\").attr(\"id\", \"text\" + 1);\n        $(\".text:last\").draggable({\n          cursor: \"move\"\n        });\n\n        _this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n      }\n    };\n\n    _this.setElemPosition = function (el, i, wrappedPostion) {\n      return new Promise(function (resolve, reject) {\n        var indivElePos = {};\n        indivElePos.top = el.top;\n        indivElePos.left = el.left;\n        indivElePos.diffTop = indivElePos.top < wrappedPostion.wrappedTop.top ? wrappedPostion.wrappedTop.top - indivElePos.top : indivElePos.top - wrappedPostion.wrappedTop.top;\n        indivElePos.diffLeft = indivElePos.left < wrappedPostion.wrappedLeft.left ? wrappedPostion.wrappedLeft.left - indivElePos.left : indivElePos.left - wrappedPostion.wrappedLeft.left;\n        $(\"#\" + el.id).css({\n          top: indivElePos.diffTop,\n          left: indivElePos.diffLeft\n        });\n        console.log(\"indivElePos\", indivElePos);\n        resolve(indivElePos);\n      });\n    };\n\n    _this.check = function (idArr) {\n      console.log(idArr[0]);\n\n      if (idArr[0].length > 1 && idArr !== \"permGroup\") {\n        var valTemp = idArr[0].map(function (value) {\n          return \"#\" + $(value).attr(\"id\");\n        });\n        var valString = valTemp.toString();\n        $(valString).wrapAll('<div class=\"wrapped ele-select ds-selected\"></div>');\n        valTemp.forEach(function (element) {\n          $(element).draggable(\"disable\");\n\n          _this.ds.removeSelectables($(element), true);\n        });\n\n        _this.ds.addSelectables($(valString).parent());\n\n        $(\".wrapped\").draggable({\n          cursor: \"move\"\n        });\n        var ch = $(\".wrapped\").children();\n        var childArray = [];\n        ch.each(function (i, el) {\n          childArray.push(el);\n        });\n        var wrappedPostion = {\n          totalHeight: 0,\n          totalWidth: 0,\n          totalDiffLeft: 0,\n          totalDiffTop: 0\n        };\n        var postionArray = childArray.map(function (element) {\n          var obj = {};\n          obj.id = $(element).attr(\"id\");\n          obj.top = parseFloat($(element).css(\"top\").slice(0, -2));\n          obj.left = parseFloat($(element).css(\"left\").slice(0, -2));\n          obj.height = $(element).outerHeight();\n          obj.width = $(element).outerWidth();\n          obj.right = obj.left + obj.width;\n          obj.bottom = obj.top + obj.height;\n\n          if (wrappedPostion.totalWidth < $(element).outerWidth()) {\n            wrappedPostion.totalWidth = $(element).outerWidth();\n          }\n\n          return obj;\n        });\n        /* var wrappedDetails = {}; */\n\n        postionArray.sort(function (a, b) {\n          return b.top < a.top ? 1 : -1;\n        });\n        console.log(\"postionArray after sorting\", postionArray);\n        wrappedPostion.wrappedTop = postionArray.hasMin(\"top\");\n        wrappedPostion.wrappedLeft = postionArray.hasMin(\"left\");\n        wrappedPostion.wrappedRight = postionArray.hasMax(\"right\");\n        wrappedPostion.wrappedBottom = postionArray.hasMax(\"bottom\");\n        console.log(wrappedPostion);\n        $(\".wrapped\").css({\n          top: wrappedPostion.wrappedTop.top,\n          left: wrappedPostion.wrappedLeft.left,\n          width: wrappedPostion.wrappedRight.right - wrappedPostion.wrappedLeft.left,\n          height: wrappedPostion.wrappedBottom.bottom - wrappedPostion.wrappedTop.top\n        });\n        postionArray.map(\n        /*#__PURE__*/\n        function () {\n          var _ref = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(el, i) {\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return _this.setElemPosition(el, i, wrappedPostion).then(function (val) {\n                      postionArray[i].diffTop = val.diffTop;\n                      postionArray[i].diffLeft = val.diffLeft;\n\n                      if (wrappedPostion.totalDiffLeft < val.diffLeft) {\n                        wrappedPostion.totalDiffLeft = val.diffLeft;\n                      }\n\n                      console.log(\"setElemPosition postionArray\", postionArray);\n                      console.log(\"setElemPosition wrappedPostion\", wrappedPostion);\n                    });\n\n                  case 2:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      } else {\n        // console.log(idArr)\n        if (idArr === \"permGroup\") {\n          var count = 0;\n          Array.prototype.slice.call(document.querySelectorAll(\".wrapped\")).forEach(function (wrapped) {\n            Array.prototype.slice.call($(\".wrapped\").children()).forEach(function (wrappedChild) {\n              if ($(wrappedChild).attr(\"id\").indexOf(\"perm\") > -1) {\n                count++;\n              }\n            });\n          });\n\n          if (count === 0) {\n            $(\".wrapped\").toggleClass(\"wrapped perm-wrapped\");\n            var cnt = $(\".perm-wrapped\");\n            cnt.each(function (i, el) {\n              $(el).attr(\"id\", \"perm-select\" + i);\n            });\n            cnt.children().each(function (i, el) {\n              $(el).removeClass(\"ele-select\");\n            });\n            /* cnt.css({\n              \"z-index\": 1\n            }) */\n\n            Array.prototype.slice.call(document.querySelectorAll(\".perm-wrapped\")).forEach(function (wrapped) {\n              _this.ds.addSelectables(wrapped);\n\n              _this.ds.removeSelectables(wrapped.children, true);\n            }); //this.ds.clearSelection()\n          } else {\n            alert(\"Kindly ungroup and then group\");\n          }\n        }\n      }\n    };\n\n    _this.unwrapPer = function (permID) {\n      var val = null;\n\n      if ($(permID).attr(\"class\").indexOf(\"perm\") > -1) {\n        val = $(permID).attr(\"id\");\n      } else {\n        val = $(permID).parent().attr(\"id\");\n      }\n\n      permID = \"\";\n      var cnt = $(\"#\" + val);\n      cnt.children().each(function (i, el) {\n        var parent = $(el).parent().position();\n        var pTop = parent.top;\n        var pLeft = parent.left;\n        console.log($(el).parent(), parent);\n        console.log(pTop, pLeft);\n        $(el).css({\n          top: parseFloat($(el).css(\"top\").slice(0, -2)) + pTop,\n          left: parseFloat($(el).css(\"left\").slice(0, -2)) + pLeft\n        });\n        $(el).draggable().draggable(\"enable\");\n        $(el).addClass(\"ele-select\");\n\n        _this.ds.addSelectables(el);\n      });\n      cnt.children().unwrap();\n    };\n\n    _this.unwrapAll = function (val, event) {\n      var\n      /* wrappedTop, wrappedLeft, */\n      cnt;\n\n      if (val === \"perm-ungroup\") {\n        cnt = $(\".perm-wrapped\");\n      } else {\n        cnt = $(\".wrapped\");\n        /* wrappedTop = parseFloat(\n           $(\".wrapped\")\n             .css(\"top\")\n             .slice(0, -2)\n         );\n         wrappedLeft = parseFloat(\n           $(\".wrapped\")\n             .css(\"left\")\n             .slice(0, -2)\n         ); */\n        // console.log(wrappedTop, wrappedLeft)\n      }\n\n      cnt.children().each(function (i, el) {\n        var parent = $(el).parent().position();\n        var pTop = parent.top;\n        var pLeft = parent.left;\n        $(el).css({\n          top: parseFloat($(el).css(\"top\").slice(0, -2)) + pTop,\n          left: parseFloat($(el).css(\"left\").slice(0, -2)) + pLeft\n        });\n        $(el).draggable().draggable(\"enable\");\n        $(el).addClass(\"ele-select\");\n\n        _this.ds.addSelectables(el);\n      });\n      cnt.children().unwrap();\n    };\n\n    _this.deleteElme = function (e) {\n      if (e.keyCode === 46 || e.type === \"click\") {\n        if ($(_this.deleteElm).parent().attr(\"class\") !== \"main-container\") {\n          $(_this.deleteElm).parent().remove();\n        } else {\n          $(_this.deleteElm).remove();\n        }\n\n        _this.positionElement = \"\";\n      }\n    };\n\n    _this.checkForImgElement = function (el) {\n      return new Promise(function (resolve, reject) {\n        if (el.getAttribute('class').indexOf('flippable') > -1) {\n          resolve('image');\n        } else {\n          resolve('normal-element');\n        }\n      });\n    };\n\n    _this.duplicateElement = function (copyArr) {\n      var newArray = [];\n\n      var ele = _toConsumableArray(document.getElementsByClassName('ds-selected'));\n\n      if (ele.length > 0) {\n        var _temp;\n\n        var cln = ele[0].cloneNode(true);\n        var orgEleId = ele[0].getAttribute('id');\n        ele[0].parentNode.insertBefore(cln, ele[0].nextSibling);\n\n        var _image = _objectSpread({}, _this.state.image);\n\n        var store = document.querySelectorAll('img');\n        console.log(_image, store);\n        Array.prototype.forEach.call(_image.allImageElement, function (demoElement) {\n          Array.prototype.forEach.call(store, function (demoElement1) {\n            if (demoElement.getAttribute('id') !== demoElement1.getAttribute('id')) newArray.push(demoElement1);\n          });\n        });\n        newArray = _toConsumableArray(new Set(newArray));\n\n        var temp = _toConsumableArray(_image.allImageElement);\n\n        (_temp = temp).push.apply(_temp, _toConsumableArray(newArray));\n\n        temp = _toConsumableArray(new Set(temp));\n        _image.allImageElement = temp;\n\n        _this.setState({\n          image: _image\n        });\n\n        if (orgEleId !== null) {\n          if (document.getElementById(orgEleId).getAttribute('class').indexOf('perm-wrapped') > -1) {\n            _this.uuidv4().then(function (val) {\n              cln.setAttribute('id', 'cloned-' + orgEleId + '-' + val);\n\n              var perm_child = _toConsumableArray(cln.childNodes);\n\n              perm_child.forEach(function (el) {\n                var elID = el.getAttribute('id');\n\n                _this.checkForImgElement(el).then(function (val) {\n                  if (val === 'image') {\n                    _this.uuidv4().then(function (val) {\n                      el.setAttribute('id', 'cloned-' + elID + '-' + val);\n\n                      var imgChild = _toConsumableArray(el.childNodes);\n\n                      imgChild.forEach(function (el) {\n                        var imgChildID = el.getAttribute('id');\n\n                        _this.uuidv4().then(function (val) {\n                          el.setAttribute('id', 'cloned-' + imgChildID + '-' + val);\n                        });\n                      });\n                    });\n                  } else {\n                    _this.uuidv4().then(function (val) {\n                      el.setAttribute('id', 'cloned-' + elID + '-' + val);\n                    });\n                  }\n                });\n              });\n            }); // cln.classList.add('cloned-'+ val);\n\n\n            $(cln).draggable({\n              cursor: \"move\"\n            });\n\n            _this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n\n            ele[0].classList.remove(\"ds-selected\");\n          } else {\n            ele.forEach(function (el) {\n              _this.checkForImgElement(el).then(function (val) {\n                var elID = el.getAttribute('id');\n\n                if (val === 'image') {\n                  var imgChild = _toConsumableArray(el.childNodes);\n\n                  _this.uuidv4().then(function (val) {\n                    el.setAttribute('id', 'cloned-' + elID + '-' + val);\n                    imgChild.forEach(function (el) {\n                      var imgChildID = el.getAttribute('id');\n\n                      _this.uuidv4().then(function (val) {\n                        el.setAttribute('id', 'cloned-' + imgChildID + '-' + val);\n\n                        _this.state.image.allImageElement.forEach(function (el) {\n                          if (_this.state.image.element[0].getAttribute('id').indexOf(el.getAttribute('id')) > -1) {\n                            _this.canvas = fx.canvas();\n\n                            if (document.getElementById(orgEleId).childNodes[0].tagName === 'CANVAS') {// this.setState({ adjust: true  });\n                            }\n                          }\n                        });\n                      });\n                    });\n                  });\n                } else {\n                  _this.uuidv4().then(function (val) {\n                    ele.forEach(function (el) {\n                      var elID = el.getAttribute('id');\n                      el.setAttribute('id', 'cloned-' + elID + '-' + val);\n                    });\n                  });\n                }\n\n                $(cln).draggable({\n                  cursor: \"move\"\n                });\n\n                _this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n\n                ele[0].classList.remove(\"ds-selected\");\n              });\n            });\n          }\n        } else {\n          ele.forEach(function (el) {\n            _this.uuidv4().then(function (val) {\n              el.setAttribute('id', 'cloned-wrapped-' + val);\n\n              var wrappedChild = _toConsumableArray(el.childNodes);\n\n              wrappedChild.forEach(function (el) {\n                _this.checkForImgElement(el).then(function (val) {\n                  var elID = el.getAttribute('id');\n\n                  if (val === 'image') {\n                    var imgChild = _toConsumableArray(el.childNodes);\n\n                    _this.uuidv4().then(function (val) {\n                      el.setAttribute('id', 'cloned-' + elID + '-' + val);\n                      imgChild.forEach(function (el) {\n                        var imgChildID = el.getAttribute('id');\n\n                        _this.uuidv4().then(function (val) {\n                          el.setAttribute('id', 'cloned-' + imgChildID + '-' + val);\n                        });\n                      });\n                    });\n                  } else {\n                    _this.uuidv4().then(function (val) {\n                      el.setAttribute('id', 'cloned-' + elID + '-' + val);\n                    });\n                  }\n                });\n              });\n            });\n          });\n          $(cln).draggable({\n            cursor: \"move\"\n          });\n\n          _this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n\n          ele[0].classList.remove(\"ds-selected\");\n        }\n      }\n    };\n\n    _this.uuidv4 = function () {\n      var store = \"\";\n      return new Promise(function (resolve, reject) {\n        \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n          var r = Math.random() * 16 | 0,\n              v = c === \"x\" ? r : r & 0x3 | 0x8;\n          store = store.concat(v.toString(16));\n        });\n        resolve(store);\n      });\n    };\n\n    _this.clickHandler = function (val, event) {\n      // console.log(val);\n      if (val.value === \"Add Element\") {\n        _this.addElement();\n      }\n\n      if (val.value === \"Group\") {\n        _this.check(\"permGroup\");\n      }\n\n      if (val.value === \"UngroupAll\") {\n        _this.unwrapAll(\"perm-ungroup\");\n      }\n\n      if (val.value === \"Delete\") {\n        _this.deleteElme(event);\n      }\n\n      if (val.value === \"Ungroup\") {\n        console.log(_this.deleteElm);\n\n        if ($(_this.deleteElm).parent().attr(\"class\").indexOf(\"perm\") > -1 || $(_this.deleteElm).attr(\"class\").indexOf(\"perm\") > -1) {\n          _this.unwrapPer(_this.deleteElm);\n        }\n      }\n\n      if (val.value === \"Copy\") {\n        // console.log(this.copyArr);\n        _this.duplicateElement(_this.copyArr);\n\n        _this.copyArr = [];\n      }\n\n      if (val.value === \"Adjust\") {\n        if (event === 'copying') {\n          _this.setState({\n            adjust: true,\n            image: image\n          });\n        } else {\n          var _image2 = _objectSpread({}, _this.state.image);\n\n          _image2.element = $(_this.deleteElm).children(); // image.src = $(this.deleteElm).children()[0].currentSrc\n\n          _this.setState({\n            adjust: true,\n            image: _image2\n          });\n        }\n      }\n    };\n\n    _this.canvasToimg = function (e) {\n      if (_this.state.image.element !== null) {\n        var canvass = $('canvas');\n        var dataURL = canvass[0].toDataURL();\n        var img = document.createElement('IMG');\n        img.id = $(_this.state.image.element).attr('id');\n        $(img).addClass($(_this.state.image.element).attr('class'));\n        img.src = dataURL;\n        $(canvass).parent().append(img);\n        $(canvass).remove();\n\n        var _image3 = _objectSpread({}, _this.state.image);\n\n        _image3.element = null;\n        _image3.src = null;\n\n        _this.setState({\n          image: _image3\n        });\n      }\n    };\n\n    _this.imgTocanvas = function (element) {\n      var pHeight = $(element).get(0).offsetHeight;\n      var pWidth = $(element).get(0).offsetWidth;\n      var image = $(element).children();\n      var currentSrc = image[0].currentSrc;\n      var imgId = null;\n\n      if (image[0].nodeName === \"IMG\") {\n        imgId = \"#\" + image.attr(\"id\");\n        var canvas = document.createElement(\"canvas\");\n\n        _this.uuidv4().then(function (val) {\n          canvas.id = \"canvas\" + val;\n          var p = $(imgId).parent();\n          p.append($(canvas));\n          $('#' + canvas.id).addClass('flippable-ele');\n          /* $('#' + canvas.id).css({\n            height: pHeight,\n            width: pWidth\n          }); */\n\n          $(imgId).remove();\n          var ctx = canvas.getContext('2d');\n          ctx.canvas.height = pHeight;\n          ctx.canvas.width = pWidth;\n          var img = new Image();\n          img.crossOrigin = '';\n          img.src = currentSrc;\n          /* img.height = '100%';\n          img.width = '100%';\n          let height = $('#' + canvas.id).height()\n          let width = $('#' + canvas.id).width()\n          console.log(height, width); */\n\n          img.onload = function () {\n            ctx.drawImage(img, 0, 0, pWidth, pHeight);\n          };\n\n          var canvasImg = _objectSpread({}, _this.state.image);\n\n          canvasImg.canvaselement = $('#' + canvas.id);\n\n          _this.setState({\n            image: canvasImg\n          });\n        });\n      }\n    };\n\n    _this.dropdownClickHandler = function (event, val) {\n      // console.log(event.target.value, val);\n      // console.log(this.positionElement);\n      if (_this.positionElement) {\n        if (event.target.value === \"Backwards\" || val === \"Backwards\") {\n          $(_this.positionElement).insertBefore($(_this.positionElement).prev());\n        }\n\n        if (event.target.value === \"Forwards\" || val === \"Forwards\") {\n          $(_this.positionElement).insertAfter($(_this.positionElement).next());\n        }\n\n        if (event.target.value === \"To Back\" || val === \"To Back\") {\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") <= -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm\") <= -1) {\n            $(_this.positionElement).insertBefore($(_this.positionElement).parent()[0].firstChild);\n          }\n        }\n\n        if (event.target.value === \"To Front\" || val === \"To Front\") {\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") <= -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm\") <= -1) {\n            $(_this.positionElement).insertAfter($(_this.positionElement).parent()[0].lastChild);\n          }\n        }\n\n        if (event.target.value === \"Top\") {\n          var parentPostion;\n          /* childPosition = {}; */\n\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") > -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm-wrapped\") <= -1) {\n            parentPostion = {\n              parent: $(_this.positionElement).parent()\n            };\n            $(parentPostion.parent).children().each(function (i, val) {\n              $(val).css({\n                top: 0\n              });\n            });\n\n            _this.unwrapAll();\n\n            _this.check(_this.copyArr);\n          } else {\n            $(_this.positionElement).css({\n              top: 0\n            });\n          }\n        }\n\n        if (event.target.value === \"Left\") {\n          var _parentPostion;\n          /* childPosition = {}; */\n\n\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") > -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm-wrapped\") <= -1) {\n            _parentPostion = {\n              parent: $(_this.positionElement).parent()\n            };\n            $(_parentPostion.parent).children().each(function (i, val) {\n              $(val).css({\n                left: 0\n              });\n            });\n\n            _this.unwrapAll();\n\n            _this.check(_this.copyArr);\n          } else {\n            $(_this.positionElement).css({\n              left: 0\n            });\n          }\n        }\n\n        if (event.target.value === \"Bottom\") {\n          var _parentPostion2,\n              childPosition = {};\n\n          _parentPostion2 = {\n            parent: $(_this.positionElement).parent(),\n            height: $(_this.positionElement).parent().outerHeight()\n          };\n\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") > -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm-wrapped\") <= -1) {\n            $(_parentPostion2.parent).children().each(function (i, val) {\n              childPosition = {\n                height: $(val).outerHeight()\n              };\n              $(val).css({\n                top: _parentPostion2.height - childPosition.height\n              });\n            });\n\n            _this.unwrapAll();\n\n            _this.check(_this.copyArr);\n          } else {\n            childPosition = {\n              height: $(_this.positionElement).outerHeight()\n            };\n            $(_this.positionElement).css({\n              top: _parentPostion2.height - childPosition.height\n            });\n          }\n        }\n\n        if (event.target.value === \"Right\") {\n          var _parentPostion3,\n              _childPosition = {};\n\n          _parentPostion3 = {\n            parent: $(_this.positionElement).parent(),\n            width: $(_this.positionElement).parent().outerWidth()\n          };\n\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") > -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm-wrapped\") <= -1) {\n            $(_parentPostion3.parent).children().each(function (i, val) {\n              _childPosition = {\n                width: $(val).outerWidth()\n              };\n              $(val).css({\n                left: _parentPostion3.width - _childPosition.width\n              });\n            });\n\n            _this.unwrapAll();\n\n            _this.check(_this.copyArr);\n          } else {\n            _childPosition = {\n              width: $(_this.positionElement).outerWidth()\n            };\n            $(_this.positionElement).css({\n              left: _parentPostion3.width - _childPosition.width\n            });\n          }\n        }\n\n        if (event.target.value === \"Centre\") {\n          var _parentPostion4,\n              _childPosition2 = {};\n\n          _parentPostion4 = {\n            parent: $(_this.positionElement).parent(),\n            width: $(_this.positionElement).parent().outerWidth() / 2\n          };\n\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") > -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm-wrapped\") <= -1) {\n            $(_parentPostion4.parent).children().each(function (i, val) {\n              _childPosition2 = {\n                width: $(val).outerWidth() / 2\n              };\n              $(val).css({\n                left: _parentPostion4.width - _childPosition2.width\n              });\n            });\n\n            _this.unwrapAll();\n\n            _this.check(_this.copyArr);\n          } else {\n            _childPosition2 = {\n              width: $(_this.positionElement).outerWidth() / 2\n            };\n            $(_this.positionElement).css({\n              left: _parentPostion4.width - _childPosition2.width\n            });\n          }\n        }\n\n        if (event.target.value === \"Middle\") {\n          var _parentPostion5,\n              _childPosition3 = {};\n\n          _parentPostion5 = {\n            parent: $(_this.positionElement).parent(),\n            height: $(_this.positionElement).parent().outerHeight() / 2\n          };\n\n          if ($(_this.positionElement).parent().attr(\"class\").indexOf(\"wrapped\") > -1 && $(_this.positionElement).parent().attr(\"class\").indexOf(\"perm-wrapped\") <= -1) {\n            $(_parentPostion5.parent).children().each(function (i, val) {\n              _childPosition3 = {\n                height: $(val).outerHeight() / 2\n              };\n              $(val).css({\n                top: _parentPostion5.height - _childPosition3.height\n              });\n            });\n\n            _this.unwrapAll();\n\n            _this.check(_this.copyArr);\n          } else {\n            _childPosition3 = {\n              height: $(_this.positionElement).outerHeight() / 2\n            };\n            $(_this.positionElement).css({\n              top: _parentPostion5.height - _childPosition3.height\n            });\n          }\n        }\n\n        if (event.target.value === \"Horizontal\" || event.target.value === \"Vertical\") {\n          var numberPattern = /[-+]?\\d+\\.?[-+]?\\d+|[-+]?\\d+/g;\n          var transformMatrixArr = $(_this.positionElement).css(\"transform\").match(numberPattern);\n\n          if (transformMatrixArr !== null) {\n            transformMatrixArr = transformMatrixArr.filter(function (element, i) {\n              if (i === 0 || i === 3) {\n                return element;\n              }\n            });\n\n            _this.flipElement(transformMatrixArr, event.target.value);\n          }\n        }\n      }\n    };\n\n    _this.flipElement = function (transformMatrixArr, flipTye) {\n      var f = -1,\n          x,\n          y;\n\n      if (flipTye === \"Horizontal\") {\n        transformMatrixArr.map(function (el, i) {\n          // console.log(i);\n          if (i === 0) {\n            x = el * f;\n          } else {\n            y = parseFloat(el);\n          }\n        });\n      } else {\n        transformMatrixArr.map(function (el, i) {\n          // console.log(i);\n          if (i === 1) {\n            y = el * f;\n          } else {\n            x = parseFloat(el);\n          }\n        });\n      }\n\n      $(_this.positionElement).css({\n        transform: \"scale(\" + x + \",\" + y + \")\"\n        /*   transition:\"scaleAnimate 0.8s ease-in-out .8s\" */\n\n      });\n    };\n\n    _this.slidderChangeHandler = function (event) {\n      var slidder = _objectSpread({}, _this.state.slidder);\n\n      slidder.range = event.target.value;\n\n      _this.setState({\n        slidder: slidder\n      }, function () {\n        $(_this.state.slidder.selected).css({\n          opacity: _this.state.slidder.range / 100\n        });\n      });\n    };\n\n    var ds;\n    _this.ds = ds;\n    var\n    /* permID ,*/\n    deleteElm, history;\n    _this.copyArr = [];\n    _this.idArray = [];\n    _this.positionElement = \"\";\n    _this.history = history;\n    _this.deleteElm = deleteElm;\n    _this.canvas = null;\n\n    Array.prototype.hasMin = function (attrib) {\n      return this.reduce(function (prev, curr) {\n        return prev[attrib] < curr[attrib] ? prev : curr;\n      });\n    };\n\n    Array.prototype.hasMax = function (attrib) {\n      return this.reduce(function (prev, curr) {\n        return prev[attrib] > curr[attrib] ? prev : curr;\n      });\n    };\n\n    window.caman = Caman;\n\n    try {\n      _this.canvas = fx.canvas();\n    } catch (e) {\n      alert(e);\n      return _possibleConstructorReturn(_this);\n    }\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      document.getElementById('adjust').disabled = true;\n      document.getElementById('delete').disabled = true;\n      document.getElementById('ungroupIndivi').disabled = true;\n      this.platform = window.platform;\n\n      var image = _objectSpread({}, this.state.image);\n\n      image.allImageElement = document.querySelectorAll('img');\n      this.setState({\n        image: image\n      });\n      /*   var idArray = []; */\n\n      /* var permIdarray = []; */\n\n      this.ds = new DragSelect({\n        selectables: document.getElementsByClassName(\"ele-select\"),\n        area: document.getElementById(\"canvas\"),\n        onElementSelect: function onElementSelect(element) {\n          // console.log(element);\n\n          /*  if($(element).attr('class').indexOf('flippable') > -1 || \n          $(element).attr('id').indexOf('canvas1') > -1) */\n          if ($(element).attr(\"class\").indexOf(\"flippable\") > -1) {\n            _this2.canvas = fx.canvas();\n            $(\"#adjust\").css({\n              opacity: 1\n            });\n            document.getElementById('adjust').disabled = false;\n          }\n\n          ;\n          _this2.positionElement = element;\n\n          var slidder = _objectSpread({}, _this2.state.slidder);\n\n          slidder.selected.push(element);\n          slidder.selected = _toConsumableArray(new Set(slidder.selected));\n          slidder.range = Math.trunc($(element).css(\"opacity\") * 100);\n\n          var image = _objectSpread({}, _this2.state.image);\n\n          image.element = $(_this2.deleteElm).children();\n\n          _this2.setState({\n            slidder: slidder,\n            platform: _this2.platform,\n            image: image\n          });\n\n          _this2.idArray.push(_this2.ds.getSelection());\n\n          _this2.copyArr.push(element);\n        }\n      });\n      $(\".text\").draggable({\n        cursor: \"move\"\n      });\n      $(\"#canvas\").on(\"mousedown\", \".main-container\", function (e) {\n        /* this.ds.clearSelection() */\n        var allElements = _toConsumableArray(document.querySelectorAll('.ele-select'));\n\n        for (var i = 0; i < allElements.length; i++) {\n          if (allElements[i].getAttribute('class').indexOf('ds-selected') > -1) {\n            $(allElements[i]).removeClass('ds-selected');\n            break;\n          }\n        }\n\n        $(\"#ungroupIndivi\").css({\n          opacity: 0\n        });\n        $(\"#delete\").css({\n          opacity: 0\n        });\n        $(\"#adjust\").css({\n          opacity: 0\n        });\n        document.getElementById('adjust').disabled = true;\n        document.getElementById('delete').disabled = true;\n        document.getElementById('ungroupIndivi').disabled = true;\n\n        var slidder = _objectSpread({}, _this2.state.slidder);\n\n        slidder.selected = [];\n\n        _this2.setState({\n          slidder: slidder,\n          adjust: false\n        });\n\n        if ($(e.target).attr(\"class\").indexOf(\"main-container\") > -1 && $(e.target).attr(\"class\").indexOf(\"flippable-ele\") <= -1 && $(e.target).attr(\"class\").indexOf(\"flippable\") <= -1) {\n          // this.canvasToimg(e);\n          if ($(\".wrapped\").length > 0) {\n            _this2.unwrapAll();\n          }\n\n          _this2.ds.start();\n        } else {\n          // this.canvasToimg(e);\n          _this2.deleteElm = e.target;\n          $(\"#delete\").css({\n            opacity: 1\n          });\n          document.getElementById('delete').disabled = false;\n\n          if ($(e.target)[0].nodeName === 'CANVAS' || $(e.target).parent().attr(\"class\").indexOf(\"perm\") > -1 || $(e.target).attr(\"class\").indexOf(\"perm\") > -1 || $(e.target).attr(\"class\").indexOf(\"flippable-ele\") > -1 && $(e.target).parent().attr(\"class\").indexOf(\"perm\") > -1) {\n            $(\"#ungroupIndivi\").css({\n              opacity: 1\n            });\n            document.getElementById('ungroupIndivi').disabled = false; // this.canvasToimg(e);\n          }\n\n          _this2.idArray = [];\n\n          _this2.ds.stop();\n\n          _this2.ds.break();\n        }\n      });\n      $(\"#canvas\").on(\"mouseup\", function (e) {\n        if (_this2.idArray.length > 1) {\n          _this2.check(_this2.idArray);\n        }\n\n        _this2.ds.stop();\n\n        _this2.ds.start();\n      });\n      var map = {}; // You could also use an array\n\n      onkeydown = onkeyup = function onkeyup(event) {\n        /*  event = event || event; // to deal with IE */\n        map[event.keyCode] = event.type === \"keydown\";\n\n        _this2.keyEventCheck(event, map);\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var button = this.state.btn.map(function (element, i) {\n        return React.createElement(Button, {\n          value: element,\n          clicked: function clicked(event) {\n            return _this3.clickHandler(element, event);\n          },\n          key: i + element,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1152\n          },\n          __self: this\n        });\n      }); // For displaying selected Element\n\n      /* var SelectedEle = this.state.slidder.selected ? <SelectedElement selected={this.state.slidder.selected} /> : null */\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1164\n        },\n        __self: this\n      }, button, React.createElement(Dropdown, {\n        dropdown: this.state.dropdown,\n        dropdownClick: this.dropdownClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1166\n        },\n        __self: this\n      }), React.createElement(Dropdown, {\n        dropdown: this.state.flip,\n        dropdownClick: this.dropdownClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1170\n        },\n        __self: this\n      }), this.state.slidder.selected.length > 0 ? React.createElement(Slider, {\n        SliderRange: this.state.slidder,\n        draggged: function draggged(event) {\n          return _this3.slidderChangeHandler(event);\n        },\n        min: \"0\",\n        max: \"100\",\n        step: \"1\",\n        slidertype: \"Tranparency\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1175\n        },\n        __self: this\n      }) : null, this.state.adjust ? React.createElement(Adjust, {\n        selected: this.state.image,\n        canvas: this.canvas,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1182\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        id: \"canvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text ele-select\",\n        id: \"text1\",\n        draggable: \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1185\n        },\n        __self: this\n      }, \"Some text\"), React.createElement(\"div\", {\n        className: \"text ele-select\",\n        id: \"text2\",\n        draggable: \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1188\n        },\n        __self: this\n      }, \"Another text\"), React.createElement(\"div\", {\n        className: \"text ele-select flippable\",\n        id: \"text3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1191\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"img-01\",\n        className: \"flippable-ele\",\n        src: \"assets/imgage1.jpeg\",\n        alt: \"Italian Trulli\",\n        width: \"70px\",\n        height: \"70px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1193\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"text ele-select flippable\",\n        id: \"text4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1202\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"img-02\",\n        className: \"flippable-ele\",\n        src: \"assets/imgage2.jpeg\",\n        alt: \"Italian Trulli\",\n        width: \"70px\",\n        height: \"70px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1204\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/adarsh/Desktop/POC/Final/new/editor-continue-position-modularized_GLFX.js/src/App.js"],"names":["React","Component","$","DragSelect","Button","Slider","Dropdown","Adjust","debug","fx","App","props","state","btn","value","id","dropdown","slidder","range","selected","flip","adjust","image","src","element","canvaselement","dataUrl","allImageElement","platform","base_URL","keyEventCheck","event","map","deleteElm","deleteElme","positionElement","dropdownClickHandler","duplicateElement","addElement","children","length","x","top","parseFloat","css","slice","append","Math","random","toFixed","uuidv4","then","val","attr","draggable","cursor","ds","addSelectables","document","getElementsByClassName","setElemPosition","el","i","wrappedPostion","Promise","resolve","reject","indivElePos","left","diffTop","wrappedTop","diffLeft","wrappedLeft","console","log","check","idArr","valTemp","valString","toString","wrapAll","forEach","removeSelectables","parent","ch","childArray","each","push","totalHeight","totalWidth","totalDiffLeft","totalDiffTop","postionArray","obj","height","outerHeight","width","outerWidth","right","bottom","sort","a","b","hasMin","wrappedRight","hasMax","wrappedBottom","count","Array","prototype","call","querySelectorAll","wrapped","wrappedChild","indexOf","toggleClass","cnt","removeClass","alert","unwrapPer","permID","position","pTop","pLeft","addClass","unwrap","unwrapAll","e","keyCode","type","remove","checkForImgElement","getAttribute","copyArr","newArray","ele","cln","cloneNode","orgEleId","parentNode","insertBefore","nextSibling","store","demoElement","demoElement1","Set","temp","setState","getElementById","setAttribute","perm_child","childNodes","elID","imgChild","imgChildID","classList","canvas","tagName","replace","c","r","v","concat","clickHandler","canvasToimg","canvass","dataURL","toDataURL","img","createElement","imgTocanvas","pHeight","get","offsetHeight","pWidth","offsetWidth","currentSrc","imgId","nodeName","p","ctx","getContext","Image","crossOrigin","onload","drawImage","canvasImg","target","prev","insertAfter","next","firstChild","lastChild","parentPostion","childPosition","numberPattern","transformMatrixArr","match","filter","flipElement","flipTye","f","y","transform","slidderChangeHandler","opacity","history","idArray","attrib","reduce","curr","window","caman","Caman","disabled","selectables","area","onElementSelect","trunc","getSelection","on","allElements","start","stop","break","onkeydown","onkeyup","button"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport $ from \"jquery\";\nimport \"jquery-ui/ui/widgets/draggable\";\nimport DragSelect from \"dragselect\";\nimport Button from \"./components/Button/Button\";\nimport Slider from \"./components/slider/slider\";\nimport Dropdown from \"./components/Dropdown/dropdown\";\nimport Adjust from \"./components/Adjust/Adjust\";\nimport { debug } from \"util\";\nimport fx from 'glfx';\n/* import SelectedElement from './components/SelectedElement/SelectedElement'; */\n// import Caman from 'caman'\n\n// --> OFF'\n\n/* eslint no-undef: 0 */\n// eslint-disable-next-line\nclass App extends Component {\n  state = {\n    btn: [\n      { value: \"Add Element\", id: \"\" },\n      { value: \"Group\", id: \"group\" },\n      { value: \"UngroupAll\", id: \"ungroup\" },\n      { value: \"Ungroup\", id: \"ungroupIndivi\" },\n      { value: \"Delete\", id: \"delete\" },\n      { value: \"Copy\", id: \"copy\" },\n      { value: \"Adjust\", id: \"adjust\" }\n      // { value: \"Undo\", id: \"undo\" },\n      // { value: \"Redo\", id: \"redo\" }\n    ],\n    dropdown: [\n      { value: \"Postion\", id: \"\" },\n      { value: \"Forwards\", id: \"fwd\" },\n      { value: \"To Front\", id: \"front\" },\n      { value: \"Backwards\", id: \"bkwd\" },\n      { value: \"To Back\", id: \"Back\" },\n      { value: \"Top\", id: \"top\" },\n      { value: \"Middle\", id: \"middle\" },\n      { value: \"Bottom\", id: \"bottom\" },\n      { value: \"Left\", id: \"left\" },\n      { value: \"Centre\", id: \"centre\" },\n      { value: \"Right\", id: \"right\" }\n    ],\n    slidder: {\n      range: 0,\n      selected: []\n    },\n    flip: [\n      { value: \"Flip\", id: \"\" },\n      { value: \"Horizontal\", id: \"hori\" },\n      { value: \"Vertical\", id: \"veri\" }\n    ],\n    adjust: false,\n    image: {\n      src: null,\n      element: null,\n      canvaselement: null,\n      dataUrl: null,\n      allImageElement: []\n    },\n    platform: null\n  };\n base_URL = \"http://localhost:3000/\";\n  constructor(props) {\n    super(props);\n    var ds;\n    this.ds = ds;\n    var /* permID ,*/ deleteElm, history;\n    this.copyArr = [];\n     this.idArray = [];\n    this.positionElement = \"\";\n    this.history = history;\n    this.deleteElm = deleteElm;\n    this.canvas = null;\n    Array.prototype.hasMin = function(attrib) {\n      return this.reduce(function(prev, curr) {\n        return prev[attrib] < curr[attrib] ? prev : curr;\n      });\n    };\n\n    Array.prototype.hasMax = function(attrib) {\n      return this.reduce(function(prev, curr) {\n        return prev[attrib] > curr[attrib] ? prev : curr;\n      });\n    };\n    window.caman = Caman;\n    try {\n      this.canvas = fx.canvas();\n      \n } catch (e) {\n     alert(e);\n     return;\n }\n  }\n\n  componentDidMount() {\n  document.getElementById('adjust').disabled = true;\n document.getElementById('delete').disabled = true;\n document.getElementById('ungroupIndivi').disabled = true;\n     this.platform = window.platform\n     let image = {...this.state.image}\n     image.allImageElement = document.querySelectorAll('img')\n     this.setState({ image: image });\n  /*   var idArray = []; */\n    /* var permIdarray = []; */\n    this.ds = new DragSelect({\n      selectables: document.getElementsByClassName(\"ele-select\"),\n      area: document.getElementById(\"canvas\"),\n      onElementSelect: element => {\n       // console.log(element);\n        \n        /*  if($(element).attr('class').indexOf('flippable') > -1 || \n        $(element).attr('id').indexOf('canvas1') > -1) */\n        if (\n          $(element)\n            .attr(\"class\")\n            .indexOf(\"flippable\") > -1\n        ) {\n          this.canvas = fx.canvas();\n          $(\"#adjust\").css({\n            opacity: 1,\n          });\n          document.getElementById('adjust').disabled = false;\n        };\n        this.positionElement = element;\n        let slidder = { ...this.state.slidder };\n        slidder.selected.push(element);\n        slidder.selected = [...new Set(slidder.selected)];\n        slidder.range = Math.trunc($(element).css(\"opacity\") * 100);\n        let image = {...this.state.image}\n        image.element = $(this.deleteElm).children();\n        this.setState({\n          slidder: slidder,\n          platform: this.platform,\n          image: image\n        });\n        this.idArray.push(this.ds.getSelection());\n        this.copyArr.push(element);        \n      }\n    });\n    $(\".text\").draggable({\n      cursor: \"move\"\n    });\n    $(\"#canvas\").on(\"mousedown\", \".main-container\", e => {\n      /* this.ds.clearSelection() */\n  let allElements = [...document.querySelectorAll('.ele-select')] \n  for(let i = 0;i<allElements.length;i++){\n  if(allElements[i].getAttribute('class').indexOf('ds-selected') > -1){\n    $(allElements[i]).removeClass('ds-selected')\n    break;\n  }\n  }\n      $(\"#ungroupIndivi\").css({\n        opacity: 0\n      });\n      $(\"#delete\").css({\n        opacity: 0\n      });\n      $(\"#adjust\").css({\n        opacity: 0,\n      });\n    \n      document.getElementById('adjust').disabled = true;\n      document.getElementById('delete').disabled = true;\n      document.getElementById('ungroupIndivi').disabled = true;\n\n      let slidder = { ...this.state.slidder };\n      slidder.selected = [];\n      this.setState({\n        slidder: slidder,\n        adjust: false\n      });\n      if (\n        $(e.target)\n          .attr(\"class\")\n          .indexOf(\"main-container\") > -1 &&\n        $(e.target)\n          .attr(\"class\")\n          .indexOf(\"flippable-ele\") <= -1 &&\n        $(e.target)\n          .attr(\"class\")\n          .indexOf(\"flippable\") <= -1 \n      ) {\n        // this.canvasToimg(e);\n        if ($(\".wrapped\").length > 0) {\n         \n          this.unwrapAll();\n        }\n        this.ds.start();\n      } else {\n        // this.canvasToimg(e);\n        this.deleteElm = e.target;\n        $(\"#delete\").css({\n          opacity: 1\n        })  \n        document.getElementById('delete').disabled = false;   \n        if ($(e.target)[0].nodeName === 'CANVAS' || $(e.target).parent().attr(\"class\").indexOf(\"perm\") > -1 ||\n          $(e.target).attr(\"class\").indexOf(\"perm\") > -1 ||\n          ($(e.target).attr(\"class\").indexOf(\"flippable-ele\") > -1 &&\n            $(e.target).parent().attr(\"class\").indexOf(\"perm\") > -1)) {\n          $(\"#ungroupIndivi\").css({\n            opacity: 1\n          });\n          document.getElementById('ungroupIndivi').disabled = false;\n          // this.canvasToimg(e);\n        }\n        this.idArray = [];\n        this.ds.stop();\n        this.ds.break();\n      }\n    });\n    $(\"#canvas\").on(\"mouseup\", e => {\n      if (this.idArray.length > 1) {\n        this.check(this.idArray);\n      }\n      this.ds.stop();\n      this.ds.start();\n    });\n\n    var map = {}; // You could also use an array\n    onkeydown = onkeyup = event => {\n      /*  event = event || event; // to deal with IE */\n      map[event.keyCode] = event.type === \"keydown\";\n      this.keyEventCheck(event, map);\n    };\n  }\n  \n  keyEventCheck = (event, map) => {\n/*    console.log(event,map, this.state.platform); */\n    if (this.deleteElm && map[46]) {\n      this.deleteElme(event);\n    }\n    if (map[17] && map[18] && map[221] && this.positionElement) {\n      this.dropdownClickHandler(event, \"To Front\");\n    }\n    if (map[17] && map[18] && map[219] && this.positionElement) {\n      this.dropdownClickHandler(event, \"To Back\");\n    }\n    if (map[17] && map[221] && this.positionElement) {\n      this.dropdownClickHandler(event, \"Forwards\");\n    }\n    if (map[17] && map[219] && this.positionElement) {\n      this.dropdownClickHandler(event, \"Backwards\");\n    }\n    if(map[17] && map[67]){\n      this.duplicateElement()\n    }\n\n    map = {};\n  };\n  addElement = () => {\n    if ($(\".main-container\").children().length) {\n      var x = $(\".text:last\");\n      var top = parseFloat(x.css(\"top\").slice(0, -2));\n      // x = x.attr(\"id\").slice(-1);\n      $(\".main-container\").append(\n        \"<div class='text ele-select'>\" + Math.random().toFixed(2) + \"</div>\"\n      );\n      // $(\".text:last\").attr(\"id\", \"text\" + ++x);\n      this.uuidv4().then(val => {\n        $(\".text:last\").attr(\"id\", \"text\" + val);\n        $(\".text:last\").css({\n          top: top + 27\n        });\n        $(\".text:last\").draggable({\n          cursor: \"move\"\n        });\n        this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n      });\n    } else {\n      $(\".main-container\").append(\n        \"<div class='text ele-select'>\" + Math.random().toFixed(2) + \"</div>\"\n      );\n      $(\".text\").attr(\"id\", \"text\" + 1);\n      $(\".text:last\").draggable({\n        cursor: \"move\"\n      });\n      this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n    }\n  };\n\n  setElemPosition = (el, i, wrappedPostion) => {\n    return new Promise((resolve, reject) => {\n      var indivElePos = {};\n      indivElePos.top = el.top;\n      indivElePos.left = el.left;\n      indivElePos.diffTop =\n        indivElePos.top < wrappedPostion.wrappedTop.top\n          ? wrappedPostion.wrappedTop.top - indivElePos.top\n          : indivElePos.top - wrappedPostion.wrappedTop.top;\n      indivElePos.diffLeft =\n        indivElePos.left < wrappedPostion.wrappedLeft.left\n          ? wrappedPostion.wrappedLeft.left - indivElePos.left\n          : indivElePos.left - wrappedPostion.wrappedLeft.left;\n      $(\"#\" + el.id).css({\n        top: indivElePos.diffTop,\n        left: indivElePos.diffLeft\n      });\n      console.log(\"indivElePos\", indivElePos);\n      resolve(indivElePos);\n    });\n  };\n\n  check = idArr => {\n    console.log(idArr[0]);\n    if (idArr[0].length > 1 && idArr !== \"permGroup\") {\n      var valTemp = idArr[0].map(value => {\n        return \"#\" + $(value).attr(\"id\");\n      });\n      var valString = valTemp.toString();\n     \n      \n      $(valString).wrapAll('<div class=\"wrapped ele-select ds-selected\"></div>');\n      valTemp.forEach(element => {\n        $(element).draggable(\"disable\");\n        this.ds.removeSelectables($(element), true);\n      });\n      this.ds.addSelectables($(valString).parent())\n      $(\".wrapped\").draggable({\n        cursor: \"move\"\n      });\n      var ch = $(\".wrapped\").children();\n      let childArray = [];\n      ch.each((i, el) => {\n        childArray.push(el);\n      });\n      var wrappedPostion = {\n        totalHeight: 0,\n        totalWidth: 0,\n        totalDiffLeft: 0,\n        totalDiffTop: 0\n      };\n      var postionArray = childArray.map(element => {\n        var obj = {};\n        obj.id = $(element).attr(\"id\");\n        obj.top = parseFloat(\n          $(element)\n            .css(\"top\")\n            .slice(0, -2)\n        );\n        obj.left = parseFloat(\n          $(element)\n            .css(\"left\")\n            .slice(0, -2)\n        );\n        obj.height = $(element).outerHeight();\n        obj.width = $(element).outerWidth();\n        obj.right = obj.left + obj.width;\n        obj.bottom = obj.top + obj.height;\n        if (wrappedPostion.totalWidth < $(element).outerWidth()) {\n          wrappedPostion.totalWidth = $(element).outerWidth();\n        }\n        return obj;\n      });\n      /* var wrappedDetails = {}; */\n      postionArray.sort((a, b) => (b.top < a.top ? 1 : -1));\n      console.log(\"postionArray after sorting\", postionArray);\n      wrappedPostion.wrappedTop = postionArray.hasMin(\"top\");\n      wrappedPostion.wrappedLeft = postionArray.hasMin(\"left\");\n      wrappedPostion.wrappedRight = postionArray.hasMax(\"right\");\n      wrappedPostion.wrappedBottom = postionArray.hasMax(\"bottom\");\n      console.log(wrappedPostion);\n      $(\".wrapped\").css({\n        top: wrappedPostion.wrappedTop.top,\n        left: wrappedPostion.wrappedLeft.left,\n        width:\n          wrappedPostion.wrappedRight.right - wrappedPostion.wrappedLeft.left,\n        height:\n          wrappedPostion.wrappedBottom.bottom - wrappedPostion.wrappedTop.top\n      });\n      postionArray.map(async (el, i) => {\n        await this.setElemPosition(el, i, wrappedPostion).then(val => {\n          postionArray[i].diffTop = val.diffTop;\n          postionArray[i].diffLeft = val.diffLeft;\n          if (wrappedPostion.totalDiffLeft < val.diffLeft) {\n            wrappedPostion.totalDiffLeft = val.diffLeft;\n          }\n          console.log(\"setElemPosition postionArray\", postionArray);\n          console.log(\"setElemPosition wrappedPostion\", wrappedPostion);\n        });\n      });\n    } else {\n      // console.log(idArr)\n      if (idArr === \"permGroup\") {\n        var count = 0;\n        Array.prototype.slice\n          .call(document.querySelectorAll(\".wrapped\"))\n          .forEach(wrapped => {\n            Array.prototype.slice\n              .call($(\".wrapped\").children())\n              .forEach(wrappedChild => {\n                if (\n                  $(wrappedChild)\n                    .attr(\"id\")\n                    .indexOf(\"perm\") > -1\n                ) {\n                  count++;\n                }\n              });\n          });\n        if (count === 0) {\n          $(\".wrapped\").toggleClass(\"wrapped perm-wrapped\");\n          var cnt = $(\".perm-wrapped\");\n          cnt.each((i, el) => {\n            $(el).attr(\"id\", \"perm-select\" + i);\n          });\n          cnt.children().each((i, el) => {\n            $(el).removeClass(\"ele-select\");\n          });\n          /* cnt.css({\n            \"z-index\": 1\n          }) */\n          Array.prototype.slice\n            .call(document.querySelectorAll(\".perm-wrapped\"))\n            .forEach(wrapped => {\n              this.ds.addSelectables(wrapped);\n              this.ds.removeSelectables(wrapped.children, true);\n            });\n            //this.ds.clearSelection()\n  \n        } else {\n          alert(\"Kindly ungroup and then group\");\n        }\n      }\n    }\n  };\n  /* To unnwrap permanent */\n  unwrapPer = permID => {\n    let val = null;\n    if (\n      $(permID)\n        .attr(\"class\")\n        .indexOf(\"perm\") > -1\n    ) {\n       val = $(permID).attr(\"id\");\n    } else {\n       val = $(permID)\n        .parent()\n        .attr(\"id\");\n    }\n    permID = \"\";\n    var cnt = $(\"#\" + val);\n\n    cnt.children().each((i, el) => {\n      var parent = $(el)\n        .parent()\n        .position();\n      var pTop = parent.top;\n      var pLeft = parent.left;\n      console.log($(el).parent(), parent);\n      console.log(pTop, pLeft);\n      $(el).css({\n        top:\n          parseFloat(\n            $(el)\n              .css(\"top\")\n              .slice(0, -2)\n          ) + pTop,\n        left:\n          parseFloat(\n            $(el)\n              .css(\"left\")\n              .slice(0, -2)\n          ) + pLeft\n      });\n      $(el)\n        .draggable()\n        .draggable(\"enable\");\n      $(el).addClass(\"ele-select\");\n      this.ds.addSelectables(el);\n    });\n    cnt.children().unwrap();\n  };\n\n  /* working unWrapAll */\n  unwrapAll = (val, event) => {\n    let /* wrappedTop, wrappedLeft, */ cnt;\n    if (val === \"perm-ungroup\") {\n      cnt = $(\".perm-wrapped\");\n    } else {\n       cnt = $(\".wrapped\");\n     /* wrappedTop = parseFloat(\n        $(\".wrapped\")\n          .css(\"top\")\n          .slice(0, -2)\n      );\n      wrappedLeft = parseFloat(\n        $(\".wrapped\")\n          .css(\"left\")\n          .slice(0, -2)\n      ); */\n      // console.log(wrappedTop, wrappedLeft)\n    }\n    cnt.children().each((i, el) => {\n      var parent = $(el)\n        .parent()\n        .position();\n      var pTop = parent.top;\n      var pLeft = parent.left;\n      $(el).css({\n        top:\n          parseFloat(\n            $(el)\n              .css(\"top\")\n              .slice(0, -2)\n          ) + pTop,\n        left:\n          parseFloat(\n            $(el)\n              .css(\"left\")\n              .slice(0, -2)\n          ) + pLeft\n      });\n      $(el)\n        .draggable()\n        .draggable(\"enable\");\n      $(el).addClass(\"ele-select\");\n      this.ds.addSelectables(el);\n    });\n    cnt.children().unwrap();\n  };\n  deleteElme = e => {\n    if (e.keyCode === 46 || e.type === \"click\") {\n      if (\n        $(this.deleteElm)\n          .parent()\n          .attr(\"class\") !== \"main-container\"\n      ) {\n        $(this.deleteElm)\n          .parent()\n          .remove();\n      } else {\n        $(this.deleteElm).remove();\n      }\n      this.positionElement = \"\";\n    }\n  };\ncheckForImgElement = (el) => {\nreturn new Promise((resolve, reject) => {\n  if(el.getAttribute('class').indexOf('flippable') > -1){\n    resolve('image')\n  }else{\n    resolve('normal-element') \n  }\n})\n}\n   duplicateElement = (copyArr) => {\n  let newArray = []\n    let ele = [...document.getElementsByClassName('ds-selected')]   \n    if(ele.length > 0){\n      let cln = ele[0].cloneNode(true);\n      let orgEleId = (ele[0].getAttribute('id'));\n      ele[0].parentNode.insertBefore(cln, ele[0].nextSibling);\n      let image = {...this.state.image}\n      let store = document.querySelectorAll('img')   \n      console.log(image, store);\n      \n     Array.prototype.forEach.call(image.allImageElement, (demoElement) =>  {\n       Array.prototype.forEach.call(store, (demoElement1) =>  {\n          if(demoElement.getAttribute('id') !== demoElement1.getAttribute('id'))\n            newArray.push(demoElement1)\n       })\n     })\n     newArray = [...new Set(newArray)];\n    let temp = [...image.allImageElement]\n     temp.push(...newArray)\n     temp = [...new Set(temp)];\n     image.allImageElement = temp; \n    this.setState({ image: image });\n     \n      if(orgEleId !== null){\n        if(document.getElementById(orgEleId).getAttribute('class').indexOf('perm-wrapped') > -1){\n           this.uuidv4().then(val => {\n            cln.setAttribute('id', 'cloned-'+ orgEleId + '-' + val)\n            let perm_child = [...cln.childNodes];\n            perm_child.forEach(el => {\n              let elID = el.getAttribute('id')\n               this.checkForImgElement(el).then(val => {\n                if(val === 'image'){\n                   this.uuidv4().then(val => {\n                    el.setAttribute('id', 'cloned-'+ elID + '-' + val);\n                    let imgChild = [...el.childNodes];\n                    imgChild.forEach(el => {\n                      let imgChildID = el.getAttribute('id')\n                      this.uuidv4().then(val => {\n                        el.setAttribute('id', 'cloned-'+ imgChildID + '-' + val);\n                      })\n                    })\n                     \n                  })\n                }\n                else{\n                   this.uuidv4().then(val => {\n                    el.setAttribute('id', 'cloned-'+ elID + '-'  + val)\n                  })\n                }\n              })\n            })\n          })\n          // cln.classList.add('cloned-'+ val);\n          $(cln).draggable({\n            cursor: \"move\"\n          });\n          this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n          ele[0].classList.remove(\"ds-selected\");\n        }else{\n          ele.forEach(el => {                    \n          this.checkForImgElement(el).then(val => {\n            let elID =  el.getAttribute('id');\n            if(val === 'image'){\n              let imgChild = [...el.childNodes]\n              this.uuidv4().then(val => {\n                el.setAttribute('id', 'cloned-'+ elID + '-'  + val)\n                imgChild.forEach(el => {\n                  let imgChildID = el.getAttribute('id');\n                  this.uuidv4().then(val => {\n                    el.setAttribute('id', 'cloned-'+ imgChildID + '-'  + val);          \n                    this.state.image.allImageElement.forEach(el => {                                                          \n                      if(this.state.image.element[0].getAttribute('id').indexOf(el.getAttribute('id')) > -1){\n                        this.canvas = fx.canvas();   \n                        if(document.getElementById(orgEleId).childNodes[0].tagName === 'CANVAS'){\n                          // this.setState({ adjust: true  });\n                        }\n                      }\n                    })                                   \n                  })\n                })  \n              })\n            \n            }else{\n              this.uuidv4().then(val =>{\n                ele.forEach(el => {\n                  let elID =  el.getAttribute('id');\n                  el.setAttribute('id', 'cloned-'+ elID + '-'  + val)\n                })\n              })\n            }\n            $(cln).draggable({\n              cursor: \"move\"\n            });\n            this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n            ele[0].classList.remove(\"ds-selected\");\n          })\n        })\n        }\n      }\n      else{\n        ele.forEach(el => {\n          this.uuidv4().then(val => {\n            el.setAttribute('id', 'cloned-wrapped-' + val);\n            let wrappedChild = [...el.childNodes];\n            wrappedChild.forEach(el => {\n              this.checkForImgElement(el).then(val => {\n                let elID = el.getAttribute('id')\n                if(val === 'image'){\n                  let imgChild = [...el.childNodes]\n              this.uuidv4().then(val => {\n                el.setAttribute('id', 'cloned-'+ elID + '-'  + val)\n                imgChild.forEach(el => {\n                  let imgChildID = el.getAttribute('id');\n                  this.uuidv4().then(val => {\n                    el.setAttribute('id', 'cloned-'+ imgChildID + '-'  + val);\n                  })\n                })\n              })\n                }\n                else{\n                  this.uuidv4().then(val => {\n                    el.setAttribute('id', 'cloned-'+ elID + '-'  + val)\n                  })\n                }\n              })\n            })\n          })\n        })\n        $(cln).draggable({\n          cursor: \"move\"\n        });\n        this.ds.addSelectables(document.getElementsByClassName(\"ele-select\"));\n        ele[0].classList.remove(\"ds-selected\");\n      }\n    }  \n  }\n\n  uuidv4 = () => {\n    var store = \"\";\n    return new Promise((resolve, reject) => {\n      \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, c => {\n        var r = (Math.random() * 16) | 0,\n          v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        store = store.concat(v.toString(16));\n      });\n      resolve(store);\n    });\n  };\n\n  clickHandler = (val, event) => {\n    // console.log(val);\n    if (val.value === \"Add Element\") {\n      this.addElement();\n    }\n    if (val.value === \"Group\") {\n      this.check(\"permGroup\");\n    }\n    if (val.value === \"UngroupAll\") {\n      this.unwrapAll(\"perm-ungroup\");\n    }\n    if (val.value === \"Delete\") {\n      this.deleteElme(event);\n    }\n    if (val.value === \"Ungroup\") {\n      console.log(this.deleteElm);\n      if (\n        $(this.deleteElm)\n          .parent()\n          .attr(\"class\")\n          .indexOf(\"perm\") > -1 ||\n        $(this.deleteElm)\n          .attr(\"class\")\n          .indexOf(\"perm\") > -1\n      ) {\n        this.unwrapPer(this.deleteElm);\n      }\n    }\n    if (val.value === \"Copy\") {\n      // console.log(this.copyArr);\n      \n      this.duplicateElement(this.copyArr);\n      this.copyArr = [];\n    }\n    if (val.value === \"Adjust\") {\n      if(event === 'copying'){\n        this.setState(\n          { \n            adjust: true, \n            image: image\n          }\n        );\n      }else{\n        let image = {...this.state.image}\n      image.element = $(this.deleteElm).children();\n      // image.src = $(this.deleteElm).children()[0].currentSrc\n      this.setState(\n        { \n          adjust: true, \n          image: image\n        }\n      );\n      }\n      \n    }\n  };\n  canvasToimg = (e) => {\n    if(this.state.image.element !== null){\n     let canvass = $('canvas');\n     let dataURL= canvass[0].toDataURL();\n      let img = document.createElement('IMG')\n      img.id = $(this.state.image.element).attr('id');\n      $(img).addClass($(this.state.image.element).attr('class'));\n      img.src = dataURL\n      $(canvass).parent().append(img)\n       $(canvass).remove();\n       let image = {...this.state.image}\n      image.element = null;\n      image.src = null\n      this.setState({\n        image: image\n      })\n    }\n  }\n  imgTocanvas = (element) => {\n  let pHeight = $(element).get(0).offsetHeight\n  let pWidth = $(element).get(0).offsetWidth\n let image = $(element).children();\nlet currentSrc = image[0].currentSrc\n let imgId = null;\n if(image[0].nodeName === \"IMG\"){\n  imgId = \"#\" + image.attr(\"id\");\n  let canvas = document.createElement(\"canvas\");\n  this.uuidv4().then( (val) => {\n    canvas.id = \"canvas\" + val;\n    let p = $(imgId).parent();\n    p.append($(canvas));\n    $('#' + canvas.id).addClass('flippable-ele');\n    /* $('#' + canvas.id).css({\n      height: pHeight,\n      width: pWidth\n    }); */\n    $(imgId).remove();\n    let ctx = canvas.getContext('2d');\n    ctx.canvas.height = pHeight;\n    ctx.canvas.width = pWidth\n    let img = new Image();\n    img.crossOrigin = '';\n    img.src = currentSrc;\n    \n    \n    /* img.height = '100%';\n    img.width = '100%';\n    let height = $('#' + canvas.id).height()\n    let width = $('#' + canvas.id).width()\n    console.log(height, width); */\n    \n    img.onload = function() {\n      ctx.drawImage(img, 0,0,pWidth,pHeight); \n  }\n  let canvasImg = {...this.state.image}\n  canvasImg.canvaselement =  $('#' + canvas.id);\n  this.setState({ image: canvasImg });\n  \n  })\n  \n }\n \n}\n  \n  dropdownClickHandler = (event, val) => {\n    // console.log(event.target.value, val);\n    // console.log(this.positionElement);\n    if (this.positionElement) {\n      if (event.target.value === \"Backwards\" || val === \"Backwards\") {\n        $(this.positionElement).insertBefore($(this.positionElement).prev());\n      }\n      if (event.target.value === \"Forwards\" || val === \"Forwards\") {\n        $(this.positionElement).insertAfter($(this.positionElement).next());\n      }\n      if (event.target.value === \"To Back\" || val === \"To Back\") {\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") <= -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm\") <= -1\n        ) {\n          $(this.positionElement).insertBefore(\n            $(this.positionElement).parent()[0].firstChild\n          );\n        }\n      }\n      if (event.target.value === \"To Front\" || val === \"To Front\") {\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") <= -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm\") <= -1\n        ) {\n          $(this.positionElement).insertAfter(\n            $(this.positionElement).parent()[0].lastChild\n          );\n        }\n      }\n      if (event.target.value === \"Top\") {\n        let parentPostion\n          /* childPosition = {}; */\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") > -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm-wrapped\") <= -1\n        ) {\n          parentPostion = {\n            parent: $(this.positionElement).parent()\n          };\n          $(parentPostion.parent)\n            .children()\n            .each((i, val) => {\n              $(val).css({\n                top: 0\n              });\n            });\n          this.unwrapAll();\n          this.check(this.copyArr);\n        } else {\n          $(this.positionElement).css({\n            top: 0\n          });\n        }\n      }\n      if (event.target.value === \"Left\") {\n        let parentPostion\n          /* childPosition = {}; */\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") > -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm-wrapped\") <= -1\n        ) {\n          parentPostion = {\n            parent: $(this.positionElement).parent()\n          };\n          $(parentPostion.parent)\n            .children()\n            .each((i, val) => {\n              $(val).css({\n                left: 0\n              });\n            });\n          this.unwrapAll();\n          this.check(this.copyArr);\n        } else {\n          $(this.positionElement).css({\n            left: 0\n          });\n        }\n      }\n      if (event.target.value === \"Bottom\") {\n        let parentPostion,\n          childPosition = {};\n        parentPostion = {\n          parent: $(this.positionElement).parent(),\n          height: $(this.positionElement)\n            .parent()\n            .outerHeight()\n        };\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") > -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm-wrapped\") <= -1\n        ) {\n          $(parentPostion.parent)\n            .children()\n            .each((i, val) => {\n              childPosition = {\n                height: $(val).outerHeight()\n              };\n              $(val).css({\n                top: parentPostion.height - childPosition.height\n              });\n            });\n          this.unwrapAll();\n          this.check(this.copyArr);\n        } else {\n          childPosition = {\n            height: $(this.positionElement).outerHeight()\n          };\n          $(this.positionElement).css({\n            top: parentPostion.height - childPosition.height\n          });\n        }\n      }\n      if (event.target.value === \"Right\") {\n        let parentPostion,\n          childPosition = {};\n        parentPostion = {\n          parent: $(this.positionElement).parent(),\n          width: $(this.positionElement)\n            .parent()\n            .outerWidth()\n        };\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") > -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm-wrapped\") <= -1\n        ) {\n          $(parentPostion.parent)\n            .children()\n            .each((i, val) => {\n              childPosition = {\n                width: $(val).outerWidth()\n              };\n              $(val).css({\n                left: parentPostion.width - childPosition.width\n              });\n            });\n          this.unwrapAll();\n          this.check(this.copyArr);\n        } else {\n          childPosition = {\n            width: $(this.positionElement).outerWidth()\n          };\n          $(this.positionElement).css({\n            left: parentPostion.width - childPosition.width\n          });\n        }\n      }\n      if (event.target.value === \"Centre\") {\n        let parentPostion,\n          childPosition = {};\n        parentPostion = {\n          parent: $(this.positionElement).parent(),\n          width:\n            $(this.positionElement)\n              .parent()\n              .outerWidth() / 2\n        };\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") > -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm-wrapped\") <= -1\n        ) {\n          $(parentPostion.parent)\n            .children()\n            .each((i, val) => {\n              childPosition = {\n                width: $(val).outerWidth() / 2\n              };\n              $(val).css({\n                left: parentPostion.width - childPosition.width\n              });\n            });\n          this.unwrapAll();\n          this.check(this.copyArr);\n        } else {\n          childPosition = {\n            width: $(this.positionElement).outerWidth() / 2\n          };\n          $(this.positionElement).css({\n            left: parentPostion.width - childPosition.width\n          });\n        }\n      }\n      if (event.target.value === \"Middle\") {\n        let parentPostion,\n          childPosition = {};\n        parentPostion = {\n          parent: $(this.positionElement).parent(),\n          height:\n            $(this.positionElement)\n              .parent()\n              .outerHeight() / 2\n        };\n        if (\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"wrapped\") > -1 &&\n          $(this.positionElement)\n            .parent()\n            .attr(\"class\")\n            .indexOf(\"perm-wrapped\") <= -1\n        ) {\n          $(parentPostion.parent)\n            .children()\n            .each((i, val) => {\n              childPosition = {\n                height: $(val).outerHeight() / 2\n              };\n              $(val).css({\n                top: parentPostion.height - childPosition.height\n              });\n            });\n          this.unwrapAll();\n          this.check(this.copyArr);\n        } else {\n          childPosition = {\n            height: $(this.positionElement).outerHeight() / 2\n          };\n          $(this.positionElement).css({\n            top: parentPostion.height - childPosition.height\n          });\n        }\n      }\n      if (\n        event.target.value === \"Horizontal\" ||\n        event.target.value === \"Vertical\"\n      ) {\n        let numberPattern = /[-+]?\\d+\\.?[-+]?\\d+|[-+]?\\d+/g;\n        let transformMatrixArr = $(this.positionElement)\n          .css(\"transform\")\n          .match(numberPattern);\n        if (transformMatrixArr !== null) {\n          transformMatrixArr = transformMatrixArr.filter((element, i) => {\n            if (i === 0 || i === 3) {\n              return element;\n            }\n          });\n\n          this.flipElement(transformMatrixArr, event.target.value);\n        }\n      }\n    }\n  };\n  /* function to flip element */\n  flipElement = (transformMatrixArr, flipTye) => {\n    let f = -1,\n      x,\n      y;\n    if (flipTye === \"Horizontal\") {\n      transformMatrixArr.map((el, i) => {\n        // console.log(i);\n        if (i === 0) {\n          x = el * f;\n        } else {\n          y = parseFloat(el);\n        }\n      });\n    } else {\n      transformMatrixArr.map((el, i) => {\n        // console.log(i);\n        if (i === 1) {\n          y = el * f;\n        } else {\n          x = parseFloat(el);\n        }\n      });\n    }\n    $(this.positionElement).css({\n      transform: \"scale(\" + x + \",\" + y + \")\"\n      /*   transition:\"scaleAnimate 0.8s ease-in-out .8s\" */\n    });\n  };\n  slidderChangeHandler = event => {\n    let slidder = { ...this.state.slidder };\n    slidder.range = event.target.value;\n    this.setState(\n      {\n        slidder: slidder\n      },\n      () => {\n        $(this.state.slidder.selected).css({\n          opacity: this.state.slidder.range / 100\n        });\n      }\n    );\n  };\n  \n  \n render() {\n    var button = this.state.btn.map((element, i) => {\n      return (\n        <Button\n          value={element}\n          clicked={event => this.clickHandler(element, event)}\n          key={i + element}\n        />\n      );\n    });\n\n    // For displaying selected Element\n    /* var SelectedEle = this.state.slidder.selected ? <SelectedElement selected={this.state.slidder.selected} /> : null */\n\n    return (\n      <React.Fragment>\n        {button}\n        <Dropdown\n          dropdown={this.state.dropdown}\n          dropdownClick={this.dropdownClickHandler}\n        />\n        <Dropdown\n          dropdown={this.state.flip}\n          dropdownClick={this.dropdownClickHandler}\n        />\n        {this.state.slidder.selected.length > 0 ? (\n          <Slider\n            SliderRange={this.state.slidder}\n            draggged={event => this.slidderChangeHandler(event)}\n            min=\"0\" max=\"100\" step=\"1\" slidertype=\"Tranparency\"\n          />\n        ) : null}\n     {/*    {SelectedEle} */}\n        {this.state.adjust ? <Adjust selected={this.state.image} canvas={this.canvas} /> : null}\n        <div id=\"canvas\">\n          <div className=\"main-container\">\n            <div className=\"text ele-select\" id=\"text1\" draggable=\"true\">\n              Some text\n            </div>\n            <div className=\"text ele-select\" id=\"text2\" draggable=\"true\">\n              Another text\n            </div>\n            <div className=\"text ele-select flippable\" id=\"text3\">\n              {/*  <canvas id=\"canvas1\" className=\"flippable-ele\"></canvas> */}\n              <img\n                id=\"img-01\"\n                className=\"flippable-ele\"\n                src=\"assets/imgage1.jpeg\"\n                alt=\"Italian Trulli\"\n                width=\"70px\"\n                height=\"70px\"\n              />\n            </div>\n            <div className=\"text ele-select flippable\" id=\"text4\">\n              {/*  <canvas id=\"canvas1\" className=\"flippable-ele\"></canvas> */}\n              <img\n                id=\"img-02\"\n                className=\"flippable-ele\"\n                src=\"assets/imgage2.jpeg\"\n                alt=\"Italian Trulli\"\n                width=\"70px\"\n                height=\"70px\"\n              />\n            </div>\n            \n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}